---
import Layout from "src/layouts/Layout.astro";
import { getCollection } from "astro:content";
import WorkCard from "@components/WorkCard.astro";

const worksContents = await getCollection("work");

const works = worksContents
	.sort((a, b) => {
		return b.data.termFrom.localeCompare(a.data.termFrom);
	})
	.sort((a, b) => {
		return b.data.termTo.localeCompare(a.data.termTo);
	});
---

<Layout title="Works | timtim.tech">
	<main class="mt-20 flex flex-col items-center justify-center gap-4">
		<div
			class="mb-20 px-5 w-full flex justify-center gap-x-10 gap-y-16 flex-wrap"
		>
			{
				works.map((item) => (
					<WorkCard
						slug={item.slug}
						title={item.data.title}
						ruby={item.data.ruby}
						summary={item.data.summary}
						termFrom={item.data.termFrom}
						termTo={item.data.termTo}
						worksCategory={item.data.worksCategory}
						techCategory={item.data.techCategory}
						worksLink={item.data.worksLink}
						githubLink={item.data.githubLink}
						thumbnail={item.data?.thumbnail}
					/>
				))
			}
		</div>
	</main>
</Layout>
